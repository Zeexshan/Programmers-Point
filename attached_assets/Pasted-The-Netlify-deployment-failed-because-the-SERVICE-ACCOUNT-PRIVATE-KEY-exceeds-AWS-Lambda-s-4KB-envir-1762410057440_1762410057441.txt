The Netlify deployment failed because the SERVICE_ACCOUNT_PRIVATE_KEY exceeds AWS Lambda's 4KB environment variable limit. We need to change our approach.
Error from Netlify:
Your environment variables exceed the 4KB limit imposed by AWS Lambda.

‚úÖ NEW SOLUTION: Google Apps Script Proxy
Instead of Netlify Functions with service account, we'll use Google Apps Script as a secure proxy. This avoids the 4KB limit entirely.

STEP 1: Remove Netlify Function
Delete: netlify/functions/submit-inquiry.js
We won't use Netlify Functions anymore.

STEP 2: Create Google Apps Script
I (the user) will create this manually in Google Apps Script. Please prepare the frontend code to use it.
The Apps Script will be deployed at a URL like:
https://script.google.com/macros/s/AKfycbxXXXXXXXXXXX/exec
I'll provide this URL after creating it.

STEP 3: Update Frontend to Use Apps Script
Update client/src/pages/InquiryForm.tsx:
Find the submit function and replace with:
typescriptasync function handleSubmit(e: React.FormEvent) {
  e.preventDefault();
  setLoading(true);
  setError(null);
  setSuccess(false);

  try {
    // Use Google Apps Script URL (will be provided by user)
    const APPS_SCRIPT_URL = import.meta.env.VITE_APPS_SCRIPT_URL || 
      'https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec';

    const response = await fetch(APPS_SCRIPT_URL, {
      method: 'POST',
      mode: 'no-cors', // Important for Apps Script
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        action: 'submitInquiry',
        data: {
          name: formData.name,
          fatherName: formData.fatherName,
          phone: formData.phone,
          email: formData.email,
          dob: formData.dob,
          courseInterest: formData.courseInterest,
          college: formData.college,
          branch: formData.branch
        }
      })
    });

    // With no-cors mode, we can't read the response
    // But if we get here, the request was sent successfully
    setSuccess(true);
    setFormData({
      name: '',
      fatherName: '',
      phone: '',
      email: '',
      dob: '',
      courseInterest: '',
      college: '',
      branch: ''
    });

    setTimeout(() => setSuccess(false), 5000);
  } catch (error: any) {
    console.error('Submission error:', error);
    setError('Failed to submit inquiry. Please try again.');
  } finally {
    setLoading(false);
  }
}

STEP 4: Update Environment Variables
Remove these from .env and Netlify (no longer needed):

‚ùå SERVICE_ACCOUNT_EMAIL
‚ùå SERVICE_ACCOUNT_PRIVATE_KEY
‚ùå VITE_SERVICE_ACCOUNT_EMAIL
‚ùå VITE_SERVICE_ACCOUNT_PRIVATE_KEY

Keep only these:

‚úÖ VITE_GOOGLE_SHEET_ID (for reading data)
‚úÖ VITE_GOOGLE_API_KEY (for reading data)
‚úÖ VITE_ADMIN_PASSWORD (for admin login)

Add this new one (I'll provide the URL):

‚úÖ VITE_APPS_SCRIPT_URL (the Apps Script deployment URL)


STEP 5: Update .env.example
bash# Google Sheets (for reading data)
VITE_GOOGLE_SHEET_ID=your_sheet_id
VITE_GOOGLE_API_KEY=your_api_key

# Google Apps Script (for writing inquiry data)
VITE_APPS_SCRIPT_URL=https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec

# Admin Panel
VITE_ADMIN_PASSWORD=admin123

STEP 6: Update netlify.toml
Remove the functions configuration:
toml[build]
  command = "npm ci && npm run build"
  publish = "dist"

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-Content-Type-Options = "nosniff"
    X-XSS-Protection = "1; mode=block"
Remove: functions = "netlify/functions" and [functions] section

üìù Summary of Changes:
What we're removing:

‚ùå Netlify Functions (too big for Lambda)
‚ùå Service account credentials from environment variables

What we're adding:

‚úÖ Google Apps Script as proxy
‚úÖ Simple POST request from frontend to Apps Script
‚úÖ Apps Script URL as environment variable

Benefits:

‚úÖ No 4KB limit (Apps Script handles credentials internally)
‚úÖ Still 100% free
‚úÖ More secure (credentials never leave Google)
‚úÖ Simpler deployment


‚è∞ Implementation Order:

‚úÖ Delete netlify/functions/submit-inquiry.js
‚úÖ Update InquiryForm.tsx to use Apps Script
‚úÖ Update .env.example
‚úÖ Update netlify.toml
‚úÖ Remove private key variables from code
‚úÖ Test build: npm run build
‚úÖ Commit and push to GitHub

After you complete these changes, I (the user) will:

Create the Google Apps Script
Deploy it and get the URL
Add the URL to Netlify environment variables
Redeploy

Please implement these changes now!"